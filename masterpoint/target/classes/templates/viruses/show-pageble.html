<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="fragments/head :: meta"></th:block>
    <th:block th:replace="fragments/head :: style"></th:block>
    <th:block th:replace="fragments/head :: script"></th:block>
</head>
<body>
<div class="container-fluid">
    <th:block th:replace="fragments/navbar"></th:block>

    <div class="container">
        <h1 class="mt-4 mb-4">All Viruses</h1>

        <table class="table">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Magnitude</th>
                <th scope="col">Released On</th>
                <th scope="col"></th>
                <th scope="col"></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="virus,iter : ${viruses}" th:object="${virus}">
                <td th:text="${viruses.getPageable().getPageNumber() * viruses.getPageable().getPageSize() + iter.index + 1}"></td>
                <td th:text="${virus.getName().length() > 40
                ? virus.getName().substring(0,40) + '...'
                : virus.getName()}"></td>
                <td th:text="${virus.getMagnitude()}"></td>
                <td th:text="${#dates.format(virus.getReleaseDate(), 'dd-MMM-yyyy')}"></td>
                <th><a class="btn btn-secondary" th:href="@{'/viruses/edit/' + ${virus.getId()}}">Edit</a> </th>
                <th><a class="btn btn-secondary" th:href="@{'/viruses/delete/' + ${virus.getId()}}">Delete</a> </th>
            </tr>
            </tbody>
        </table>
        <nav>
            <ul class="pagination d-flex justify-content-center">
                <!--Previous Button-->
                <li class="page-item"><a class="page-link" th:if="${viruses.hasPrevious()}" th:href="@{/viruses/show(page=${viruses.previousPageable().getPageNumber() })}">Previous</a></li>

                <!--Dot Button-->
                <li class="page-item"><a class="page-link" th:if="${viruses.getPageable().getPageNumber() + 1 > 5}" th:disabled="true">...</a></li>

                <!--Pagination Navigation-->
                <th:block th:each="number : ${#numbers.sequence(
            ((viruses.getPageable().getPageNumber() / 5) * 5) + 1
            ,
            (((viruses.getPageable().getPageNumber() / 5) * 5) + 5)
            )}">
                    <li class="page-item" th:classappend="${number == viruses.getPageable().getPageNumber() + 1 ? ' active' : ''}"><a class="page-link" th:text="${number}" th:href="@{/viruses/show(page=${number - 1})}"></a></li>
                </th:block>

                <!--Dot Button-->
                <li class="page-item"><a class="page-link" th:if="${viruses.getPageable().getPageNumber() + 1 < viruses.getTotalPages() - 4}" th:disabled="true">...</a></li>

                <!--Next Button-->
                <li class="page-item"><a class="page-link" th:if="${viruses.hasNext()}" th:href="@{/viruses/show(page=${viruses.nextPageable().getPageNumber() })}">Next</a></li>
            </ul>
        </nav>

    </div>
</div>
</body>
</html>